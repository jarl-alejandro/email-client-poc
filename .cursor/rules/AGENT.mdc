# ğŸ¤– AGENT.md â€” mail-client-poc

## PropÃ³sito

Este documento define **cÃ³mo debe actuar cualquier agente de IA** (Lovable, Cursor, Copilot, etc.) que genere o modifique cÃ³digo en este repositorio.

El objetivo del proyecto es un **POC de un cliente de correos** (inicialmente Gmail) enfocado en **arquitectura, UX y viabilidad tÃ©cnica**, no en un producto final.

---

## ğŸ¯ Objetivo del proyecto

Construir un **cliente de correo moderno** que permita:

* AutenticaciÃ³n con Google
* VisualizaciÃ³n de correos
* Lectura de mensajes
* Operaciones bÃ¡sicas (read / unread)

Este repositorio es un **Proof of Concept (POC)**.

---

## ğŸ§± Stack tecnolÃ³gico (OBLIGATORIO)

El agente **DEBE** respetar este stack:

* **TanStack Start** (routing, layouts, server functions)
* **React 18 + TypeScript**
* **TanStack Query** para manejo de estado remoto
* **shadcn/ui** para UI
* **TailwindCSS** para estilos
* **lucide-react** para Ã­conos
* **BetterAuth** para autenticaciÃ³n (Google OAuth)

âŒ No introducir otras librerÃ­as de UI
âŒ No introducir frameworks adicionales

---

## ğŸ§  Principios de arquitectura

### 1. POC-first (no sobre-ingenierÃ­a)

* No introducir capas innecesarias
* No Clean Architecture
* No DDD
* No repositorios abstractos

La prioridad es **claridad y velocidad**.

---

### 2. Server-first

* Todas las llamadas a Gmail API **DEBEN** hacerse en el servidor
* Nunca llamar Gmail API desde el browser
* Usar **Server Functions de TanStack Start** como frontera

---

### 3. Sin base de datos (por ahora)

Para este POC:

* âŒ No usar base de datos
* âŒ No persistencia propia
* âœ… Gmail es la fuente de verdad
* âœ… Sesiones y tokens viven en memoria / cookies

---

## ğŸ” AutenticaciÃ³n

* Usar **BetterAuth** con Google Provider
* Scopes mÃ­nimos necesarios
* Preferir `gmail.readonly` en el POC

El agente:

* NO debe implementar lÃ³gica custom de OAuth
* NO debe almacenar tokens en el cliente

---

## ğŸ“¬ Gmail API

### Reglas estrictas

* Toda interacciÃ³n con Gmail API va en `/server/gmail`
* El cliente solo consume Server Functions
* No lÃ³gica Gmail en componentes React

---

## âš›ï¸ Frontend / UI

### Estilo

* Inspirado en Gmail / Linear
* Minimalista
* Desktop-first
* UI clara y funcional

---

### Componentes UI

* Usar componentes de **shadcn/ui**
* Preferir composiciÃ³n sobre abstracciÃ³n
* Componentes pequeÃ±os y reutilizables

Ejemplos vÃ¡lidos:

* `ResizablePanelGroup`
* `ScrollArea`
* `Card`
* `DropdownMenu`

---

## ğŸ”„ Estado y datos

* Usar **TanStack Query** para:

  * Listado de correos
  * Vista de mensaje
  * Refetch
  * Cache

* No usar `useEffect` para fetching

* No manejar loading/error states manualmente

---

## ğŸ—‚ï¸ Estructura de carpetas (referencia)

```
/src
  /routes
  /components
    /layout
    /mail
  /server
    /auth
    /gmail
  /lib
```

El agente debe respetar esta organizaciÃ³n.

---

## ğŸš¦ QuÃ© SÃ puede hacer el agente

* Crear componentes React
* Crear layouts
* Crear server functions
* Mockear datos
* Mejorar UX/UI
* Refactorizar para claridad

---

## â›” QuÃ© NO debe hacer el agente

* AÃ±adir base de datos
* AÃ±adir lÃ³gica de negocio compleja
* AÃ±adir librerÃ­as no aprobadas
* Implementar features fuera del alcance
* Optimizar prematuramente

---

## ğŸ§ª Alcance funcional del POC

### Incluido

* Login con Google
* Inbox
* Vista de mensaje
* Marcar como leÃ­do

### Fuera de alcance

* Enviar correos
* Adjuntos
* BÃºsqueda avanzada
* Etiquetas custom
* Multi-provider (por ahora)

---

## ğŸ§  Regla de oro

> Si una decisiÃ³n no ayuda a **validar el POC mÃ¡s rÃ¡pido**, no debe implementarse.

---

## ğŸ“Œ Nota final

Este documento es **obligatorio** para cualquier agente de IA que trabaje en este repositorio.

Ante dudas:

* Priorizar simplicidad
* Priorizar legibilidad
* Priorizar intenciÃ³n de POC
